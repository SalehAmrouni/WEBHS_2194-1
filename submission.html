<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add an Ally | Student Atlas - Community Resource Submission</title>
    
    <!-- Pre-initialization: Apply saved accessibility settings before page renders -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('studentAtlasTheme');
            if (savedTheme) document.documentElement.setAttribute('data-theme', savedTheme);
            const savedAccessibility = localStorage.getItem('studentAtlasAccessibility');
            if (savedAccessibility) {
                try {
                    const accessibility = JSON.parse(savedAccessibility);
                    const html = document.documentElement;
                    if (accessibility.fontSize === 'large') html.classList.add('large-text');
                    else if (accessibility.fontSize === 'extra-large') html.classList.add('extra-large-text');
                    if (accessibility.highContrast) html.classList.add('high-contrast');
                    if (accessibility.colorBlindMode && accessibility.colorBlindMode !== 'normal') html.classList.add(accessibility.colorBlindMode);
                    if (accessibility.dyslexiaFriendly) html.classList.add('dyslexia-friendly');
                    if (accessibility.reducedMotion) html.classList.add('reduced-motion');
                } catch (e) {}
            }
        })();
    </script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/accessibility.css">
    
    <meta name="description" content="Submit new community resources to Student Atlas. Help expand opportunities for students nationwide.">
    
    <style>
        /* Submission-specific styles */
        .process-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 3rem 0;
        }
        
        .process-steps:before {
            content: '';
            position: absolute;
            top: 25px;
            left: 10%;
            right: 10%;
            height: 2px;
            background: var(--border-color);
            z-index: 1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--border-color);
            color: var(--text-dim);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            transition: all var(--transition-fast);
        }

        .step.active .step-number {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .step-content {
            text-align: center;
        }

        .form-section {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        .form-section legend {
            font-weight: 600;
            font-size: 1.2rem;
            padding: 0 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .form-hint {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .terms-section {
            background: rgba(16, 185, 129, 0.05);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            gap: 1rem;
        }

        .form-note {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(59, 130, 246, 0.05);
            border-radius: var(--radius-md);
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .guidelines-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 2rem;
            border: 1px solid var(--border-color);
        }

        .guidelines-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .guideline {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .guideline-icon {
            width: 2rem;
            height: 2rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .recent-submissions {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-top: 2rem;
        }

        .submissions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .submission-card {
            background: var(--bg-primary);
            padding: 1.5rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
            position: relative;
        }

        .status-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-badge.approved {
            background: var(--success);
            color: white;
        }

        .status-badge.pending {
            background: var(--warning);
            color: white;
        }

        .success-modal-content {
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            width: 5rem;
            height: 5rem;
            background: var(--success);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
        }

        .success-icon i {
            width: 3rem;
            height: 3rem;
        }

        .success-details {
            text-align: left;
            background: rgba(16, 185, 129, 0.05);
            padding: 1.5rem;
            border-radius: var(--radius-md);
            margin: 2rem 0;
        }

        .success-details ol {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .success-details li {
            margin-bottom: 0.5rem;
        }

        .success-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .success-note {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .spin {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .process-steps {
                flex-direction: column;
                gap: 2rem;
            }

            .process-steps:before {
                display: none;
            }

            .step {
                flex-direction: row;
                gap: 1rem;
            }

            .step-number {
                margin-bottom: 0;
            }

            .step-content {
                text-align: left;
            }

            .form-actions {
                flex-direction: column;
            }

            .success-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .form-section {
                padding: 1rem;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
            }

            .submissions-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Skip to Content Link -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- ========== ACCESSIBILITY CONTROLS ========== -->
    <div class="accessibility-bar" id="accessibilityBar">
        <button class="accessibility-btn" id="fontIncrease" aria-label="Increase font size">
            <i data-lucide="zoom-in"></i> A+
        </button>
        <button class="accessibility-btn" id="fontDecrease" aria-label="Decrease font size">
            <i data-lucide="zoom-out"></i> A-
        </button>
        <button class="accessibility-btn" id="highContrast" aria-label="Toggle high contrast mode">
            <i data-lucide="sun"></i> Contrast
        </button>
        <button class="accessibility-btn" id="themeToggle" aria-label="Toggle light/dark theme">
            <i data-lucide="moon"></i> Theme
        </button>
        <button class="accessibility-btn" id="screenReader" aria-label="Enable screen reader mode">
            <i data-lucide="headphones"></i> Reader
        </button>
        <select class="accessibility-btn" id="colorBlindMode" aria-label="Color blind modes">
            <option value="normal">Normal Vision</option>
            <option value="protanopia">Protanopia</option>
            <option value="deuteranopia">Deuteranopia</option>
            <option value="tritanopia">Tritanopia</option>
            <option value="grayscale">Grayscale</option>
        </select>
    </div>

    <!-- ========== GLOBAL HEADER ========== -->
    <header class="global-header">
        <div class="logo" onclick="window.location.href='index.html'">
            <i data-lucide="map" class="logo-icon"></i>
            <h1>Student Atlas</h1>
        </div>
        
        <div class="nav-right">
            <!-- App Navigation -->
            <div id="appNav">
                <button class="btn btn-secondary" onclick="window.location.href='dashboard.html'">
                    <i data-lucide="layout-grid"></i> Directory
                </button>
                <div class="profile-dropdown">
                    <button class="btn btn-secondary" onclick="toggleProfileMenu()">
                        <i data-lucide="user"></i>
                        <span id="userName">Student</span>
                        <i data-lucide="chevron-down"></i>
                    </button>
                    <div class="profile-menu hidden" id="profileMenu">
                        <a href="profile.html#profile" class="profile-menu-item">
                            <i data-lucide="id-card"></i>
                            <span>My Profile</span>
                        </a>
                        <a href="profile.html#bookmarks" class="profile-menu-item">
                            <i data-lucide="bookmark"></i>
                            <span>My Bookmarks</span>
                        </a>
                        <a href="profile.html#credentials" class="profile-menu-item">
                            <i data-lucide="key"></i>
                            <span>Credentials</span>
                        </a>
                        <a href="submission.html" class="profile-menu-item active">
                            <i data-lucide="plus-circle"></i>
                            <span>Add an Ally</span>
                        </a>
                        <div class="profile-menu-item" onclick="logout()">
                            <i data-lucide="log-out"></i>
                            <span>Logout</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ========== MAIN SUBMISSION CONTENT ========== -->
    <main id="main-content" class="page">
        <div class="container">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1><i data-lucide="plus-circle"></i> Add an Ally</h1>
                <p class="text-dim">Submit new community resources to help expand opportunities for students nationwide</p>
            </div>
            
            <!-- Submission Process Steps -->
            <div class="process-steps mb-8">
                <div class="step active">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Submit Resource</h4>
                        <p class="text-dim">Fill out the form below</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Review Process</h4>
                        <p class="text-dim">Our team verifies the submission</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Added to Directory</h4>
                        <p class="text-dim">Resource appears in Student Atlas</p>
                    </div>
                </div>
            </div>
            
            <!-- Submission Form -->
            <div class="submission-form-container">
                <div class="form-header">
                    <h3><i data-lucide="file-text"></i> Resource Submission Form</h3>
                    <p class="text-dim">All fields are required unless marked optional</p>
                </div>
                
                <form id="submissionForm" onsubmit="return handleSubmission(event)">
                    <!-- Basic Information -->
                    <fieldset class="form-section">
                        <legend><i data-lucide="info"></i> Basic Information</legend>
                        
                        <div class="form-group">
                            <label class="form-label" for="resourceName">
                                Resource/Program Name *
                            </label>
                            <input type="text" id="resourceName" class="form-input" required 
                                   placeholder="e.g., NASA OSTEM Internship">
                            <p class="form-hint">The official name of the opportunity</p>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="organization">
                                Organization *
                            </label>
                            <input type="text" id="organization" class="form-input" required 
                                   placeholder="e.g., NASA, Google, Local Non-profit">
                            <p class="form-hint">The organization that runs this opportunity</p>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="website">
                                    Website URL *
                                </label>
                                <input type="url" id="website" class="form-input" required 
                                       placeholder="https://example.com">
                                <p class="form-hint">Official website for more information</p>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="contactEmail">
                                    Contact Email (Optional)
                                </label>
                                <input type="email" id="contactEmail" class="form-input" 
                                       placeholder="contact@organization.org">
                                <p class="form-hint">For verification purposes only</p>
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- Opportunity Details -->
                    <fieldset class="form-section">
                        <legend><i data-lucide="briefcase"></i> Opportunity Details</legend>
                        
                        <div class="form-group">
                            <label class="form-label" for="description">
                                Description *
                            </label>
                            <textarea id="description" class="form-input" rows="4" required 
                                      placeholder="Describe the opportunity, what students will do, benefits, etc."></textarea>
                            <p class="form-hint">Provide a clear, concise description (2-3 sentences recommended)</p>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="cluster">
                                    Primary Cluster *
                                </label>
                                <select id="cluster" class="form-input" required>
                                    <option value="">Select a cluster</option>
                                    <option value="STEM">STEM (Science, Technology, Engineering, Math)</option>
                                    <option value="Arts">Arts (Visual, Performing, Creative Writing)</option>
                                    <option value="Humanitarian">Humanitarian (Service, Community, Social Justice)</option>
                                    <option value="Civics">Civics (Government, Politics, Leadership)</option>
                                    <option value="Scholarships">Scholarships (Financial Aid, Grants)</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="cost">
                                    Cost to Student *
                                </label>
                                <select id="cost" class="form-input" required>
                                    <option value="">Select cost type</option>
                                    <option value="Free">Free</option>
                                    <option value="Paid">Paid</option>
                                    <option value="Scholarship">Scholarship Available</option>
                                    <option value="Stipend">Stipend Provided</option>
                                    <option value="Variable">Variable/Depends</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="location">
                                    Location *
                                </label>
                                <select id="location" class="form-input" required>
                                    <option value="">Select location type</option>
                                    <option value="Virtual">Virtual/Online</option>
                                    <option value="National">National (Multiple Locations)</option>
                                    <option value="Local">Local (Specific City/Region)</option>
                                    <option value="International">International</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="duration">
                                    Duration *
                                </label>
                                <select id="duration" class="form-input" required>
                                    <option value="">Select duration</option>
                                    <option value="Summer Program">Summer Program</option>
                                    <option value="Academic Year">Academic Year</option>
                                    <option value="Short Term">Short Term (1-4 weeks)</option>
                                    <option value="Long Term">Long Term (3+ months)</option>
                                    <option value="Ongoing">Ongoing/Rolling</option>
                                    <option value="Event">Single Event</option>
                                </select>
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- Eligibility Requirements -->
                    <fieldset class="form-section">
                        <legend><i data-lucide="check-circle"></i> Eligibility Requirements</legend>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="minGPA">
                                    Minimum GPA (Optional)
                                </label>
                                <select id="minGPA" class="form-input">
                                    <option value="">Not specified</option>
                                    <option value="2.0">2.0</option>
                                    <option value="2.5">2.5</option>
                                    <option value="3.0">3.0</option>
                                    <option value="3.5">3.5</option>
                                    <option value="3.8">3.8</option>
                                    <option value="4.0">4.0</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="grades">
                                    Eligible Grades *
                                </label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="grades" value="9">
                                        <span>9th</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="grades" value="10">
                                        <span>10th</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="grades" value="11">
                                        <span>11th</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="grades" value="12">
                                        <span>12th</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="grades" value="13">
                                        <span>College</span>
                                    </label>
                                </div>
                                <input type="hidden" id="gradesInput" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                Required Skills/Interests (Select all that apply)
                            </label>
                            <div class="checkbox-grid">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="STEM">
                                    <span>STEM & Science</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="Arts">
                                    <span>Arts & Creativity</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="Leadership">
                                    <span>Leadership</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="Community Service">
                                    <span>Community Service</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="Research">
                                    <span>Research</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="Programming">
                                    <span>Programming</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="Writing">
                                    <span>Writing</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="skills" value="Public Speaking">
                                    <span>Public Speaking</span>
                                </label>
                            </div>
                            <input type="hidden" id="skillsInput">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="serviceHours">
                                Minimum Service Hours (Optional)
                            </label>
                            <input type="number" id="serviceHours" class="form-input" min="0" max="1000" 
                                   placeholder="e.g., 20">
                            <p class="form-hint">Leave blank if not required</p>
                        </div>
                    </fieldset>
                    
                    <!-- Submitter Information -->
                    <fieldset class="form-section">
                        <legend><i data-lucide="user"></i> Your Information</legend>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="submitterName">
                                    Your Name *
                                </label>
                                <input type="text" id="submitterName" class="form-input" required 
                                       placeholder="Your full name">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="submitterEmail">
                                    Your Email *
                                </label>
                                <input type="email" id="submitterEmail" class="form-input" required 
                                       placeholder="you@example.com">
                                <p class="form-hint">We'll notify you when your submission is reviewed</p>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="submitterRole">
                                Your Role/Connection to this Resource *
                            </label>
                            <select id="submitterRole" class="form-input" required>
                                <option value="">Select your role</option>
                                <option value="Student">Student Participant</option>
                                <option value="Parent">Parent/Guardian</option>
                                <option value="Educator">Teacher/Counselor</option>
                                <option value="Organization Staff">Organization Staff</option>
                                <option value="Alumni">Program Alumni</option>
                                <option value="Community Member">Community Member</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="additionalInfo">
                                Additional Information (Optional)
                            </label>
                            <textarea id="additionalInfo" class="form-input" rows="3" 
                                      placeholder="Any additional details, personal experience with this resource, or special notes for our review team..."></textarea>
                        </div>
                    </fieldset>
                    
                    <!-- Terms and Submission -->
                    <div class="form-section terms-section">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="termsAgreement" required>
                                <span>
                                    I confirm that this information is accurate to the best of my knowledge and I have permission to share it. *
                                </span>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="newsletterOptIn">
                                <span>
                                    Yes, I'd like to receive updates about Student Atlas and new opportunities (optional)
                                </span>
                            </label>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="clearForm()">
                                <i data-lucide="trash-2"></i> Clear Form
                            </button>
                            <button type="submit" class="btn btn-primary" id="submitButton">
                                <i data-lucide="send"></i> Submit for Review
                            </button>
                        </div>
                        
                        <p class="form-note">
                            <i data-lucide="info"></i> Submissions are reviewed by the Student Atlas team within 5-7 business days. You'll receive an email notification when your submission is approved or if we need more information.
                        </p>
                    </div>
                </form>
            </div>
            
            <!-- Submission Guidelines -->
            <div class="guidelines-card mt-8">
                <h3><i data-lucide="book-open"></i> Submission Guidelines</h3>
                <div class="guidelines-grid">
                    <div class="guideline">
                        <i data-lucide="check-circle" class="guideline-icon"></i>
                        <h4>Eligible Resources</h4>
                        <p>Programs, internships, scholarships, competitions, volunteer opportunities, and community resources for students in grades 9-12 and college.</p>
                    </div>
                    <div class="guideline">
                        <i data-lucide="x-circle" class="guideline-icon"></i>
                        <h4>Not Eligible</h4>
                        <p>Commercial services, paid advertising, individual tutoring services, or opportunities that require payment without clear value.</p>
                    </div>
                    <div class="guideline">
                        <i data-lucide="shield" class="guideline-icon"></i>
                        <h4>Verification Process</h4>
                        <p>All submissions are verified for accuracy, safety, and appropriateness before being added to the directory.</p>
                    </div>
                    <div class="guideline">
                        <i data-lucide="clock" class="guideline-icon"></i>
                        <h4>Review Timeline</h4>
                        <p>Typically 5-7 business days. During peak times (summer), reviews may take up to 10 business days.</p>
                    </div>
                </div>
            </div>
            
            <!-- Recent Submissions (Demo) -->
            <div class="recent-submissions mt-8">
                <h3><i data-lucide="users"></i> Recently Added by Community</h3>
                <div class="submissions-grid">
                    <div class="submission-card">
                        <span class="status-badge approved">Approved</span>
                        <h4>Local STEM Fair 2026</h4>
                        <p class="text-dim">Submitted by: Teacher • 3 days ago</p>
                        <p>High school science fair with $5,000 in prizes for innovative projects.</p>
                    </div>
                    <div class="submission-card">
                        <span class="status-badge pending">Under Review</span>
                        <h4>Youth Climate Council</h4>
                        <p class="text-dim">Submitted by: Community Member • 1 week ago</p>
                        <p>Student-led environmental advocacy group with monthly meetings.</p>
                    </div>
                    <div class="submission-card">
                        <span class="status-badge approved">Approved</span>
                        <h4>College Essay Workshop</h4>
                        <p class="text-dim">Submitted by: College Counselor • 2 weeks ago</p>
                        <p>Free virtual workshops for writing competitive college application essays.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="global-header" style="border-top: 1px solid var(--border-color); border-bottom: none; margin-top: 4rem;">
        <div class="container">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-dim">&copy; 2026 Student Atlas. All Rights Reserved.</p>
                    <p class="text-dim" style="font-size: 0.9rem;">
                        TSA Webmaster Chapter Entry
                    </p>
                </div>
                <div class="flex gap-3">
                    <a href="dashboard.html" class="text-dim">
                        <i data-lucide="layout-grid"></i> Directory
                    </a>
                    <a href="profile.html" class="text-dim">
                        <i data-lucide="user"></i> Profile
                    </a>
                    <a href="references.html" class="text-dim">
                        <i data-lucide="file-text"></i> References
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- ========== AI CHAT PANEL ========== -->
    <div class="ai-panel" id="aiPanel">
        <div class="ai-header">
            <div class="flex items-center gap-2">
                <i data-lucide="bot" style="color: var(--primary);"></i>
                <h3>Steve AI Counselor</h3>
            </div>
            <button onclick="toggleAIChat()" class="btn btn-secondary" style="padding: 0.5rem;">
                <i data-lucide="x"></i>
            </button>
        </div>
        
        <div class="ai-messages" id="aiMessages">
            <div class="message ai">
                <strong>Steve:</strong> Need help submitting a resource? I can answer questions about the form, eligibility, or submission guidelines.
            </div>
        </div>
        
        <div class="ai-input">
            <input type="text" id="aiInput" placeholder="Ask about submission requirements or guidelines...">
            <button class="btn btn-primary" onclick="sendAIMessage()">
                <i data-lucide="send"></i>
            </button>
        </div>
    </div>

    <!-- ========== SUBMISSION SUCCESS MODAL ========== -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="success-modal-content">
                <div class="success-icon">
                    <i data-lucide="check-circle"></i>
                </div>
                <h2>Submission Received!</h2>
                <p class="text-dim">Thank you for helping expand opportunities for students nationwide.</p>
                
                <div class="success-details">
                    <p><strong>Next Steps:</strong></p>
                    <ol>
                        <li>Our review team will verify your submission within 5-7 business days</li>
                        <li>You'll receive an email notification when it's approved</li>
                        <li>Once approved, the resource will appear in the Student Atlas directory</li>
                    </ol>
                </div>
                
                <div class="success-actions">
                    <button class="btn btn-primary" onclick="closeSuccessModal()">
                        <i data-lucide="home"></i> Return to Home
                    </button>
                    <button class="btn btn-secondary" onclick="submitAnother()">
                        <i data-lucide="plus-circle"></i> Submit Another Resource
                    </button>
                </div>
                
                <p class="success-note">
                    <i data-lucide="mail"></i> A confirmation email has been sent to <span id="confirmationEmail"></span>
                </p>
            </div>
        </div>
    </div>

    <!-- ========== READER OVERLAY ========== -->
    <div id="readerOverlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(10,10,10,0.98); color:#fff; z-index:20000; overflow:auto; padding:2rem;">
        <button onclick="closeReaderOverlay()" style="position:absolute; top:1rem; right:2rem; font-size:2rem; background:none; color:#fff; border:none; cursor:pointer;">&times;</button>
        <h2 style="font-size:2.5rem; margin-bottom:1.5rem;">Reader Mode</h2>
        <div id="readerContent" style="font-size:1.5rem; line-height:2; max-width:900px; margin:auto;"></div>
        <button onclick="readAloud()" style="margin-top:2rem; font-size:1.2rem; padding:0.75rem 2rem; background:#10b981; color:#000; border:none; border-radius:8px; cursor:pointer;">Read Aloud</button>
    </div>

    <!-- ========== JAVASCRIPT ========== -->
    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
    
    <script>
        // Submission form functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // Load user profile for auto-fill
            loadUserProfile();
            
            // Set up form validation
            setupFormValidation();
            
            // Set up event listeners
            setupSubmissionListeners();
        });
        
        // ============================================
        // FORM SETUP & VALIDATION
        // ============================================
        
        function loadUserProfile() {
            const profile = StudentAtlas.getStudentProfile();
            if (profile) {
                // Auto-fill submitter information if available
                document.getElementById('submitterName').value = profile.username || '';
                document.getElementById('submitterEmail').value = profile.email || '';
                document.getElementById('userName').textContent = profile.username?.split(' ')[0] || 'TSA Student 2026' + ' Student';
            }
        }
        
        function setupFormValidation() {
            // Update hidden inputs for checkboxes
            const form = document.getElementById('submissionForm');
            
            // Grades checkboxes to hidden input
            const gradesCheckboxes = form.querySelectorAll('input[name="grades"]');
            const gradesInput = document.getElementById('gradesInput');
            
            gradesCheckboxes.forEach(cb => {
                cb.addEventListener('change', function() {
                    const selectedGrades = Array.from(gradesCheckboxes)
                        .filter(cb => cb.checked)
                        .map(cb => parseInt(cb.value));
                    
                    gradesInput.value = selectedGrades.join(',');
                    
                    // Custom validation
                    if (selectedGrades.length === 0) {
                        gradesInput.setCustomValidity('Please select at least one grade level');
                    } else {
                        gradesInput.setCustomValidity('');
                    }
                });
            });
            
            // Skills checkboxes to hidden input
            const skillsCheckboxes = form.querySelectorAll('input[name="skills"]');
            const skillsInput = document.getElementById('skillsInput');
            
            skillsCheckboxes.forEach(cb => {
                cb.addEventListener('change', function() {
                    const selectedSkills = Array.from(skillsCheckboxes)
                        .filter(cb => cb.checked)
                        .map(cb => cb.value);
                    
                    skillsInput.value = selectedSkills.join(',');
                });
            });
            
            // Real-time URL validation
            const websiteInput = document.getElementById('website');
            websiteInput.addEventListener('blur', function() {
                if (this.value && !isValidURL(this.value)) {
                    this.setCustomValidity('Please enter a valid URL starting with http:// or https://');
                } else {
                    this.setCustomValidity('');
                }
            });
        }
        
        function isValidURL(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }
        
        // ============================================
        // FORM SUBMISSION HANDLING
        // ============================================
        
        function handleSubmission(event) {
            event.preventDefault();
            
            if (!validateForm()) {
                StudentAtlas.showNotification('Please fill in all required fields correctly.', 'error');
                return false;
            }
            
            // Get form data
            const formData = getFormData();
            
            // Show loading state
            const submitBtn = document.getElementById('submitButton');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i data-lucide="loader" class="spin"></i> Submitting...';
            submitBtn.disabled = true;
            
            // Simulate API submission
            setTimeout(() => {
                // In a real app, this would be an API call
                // For demo, we'll simulate success
                
                // Store submission in localStorage
                saveSubmission(formData);
                
                // Show success modal
                showSuccessModal(formData.submitterEmail);
                
                // Reset button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                
            }, 1500);
            
            return false; // Prevent actual form submission
        }
        
        function validateForm() {
            const form = document.getElementById('submissionForm');
            return form.checkValidity();
        }
        
        function getFormData() {
            const grades = Array.from(document.querySelectorAll('input[name="grades"]:checked'))
                              .map(cb => parseInt(cb.value));
            
            const skills = Array.from(document.querySelectorAll('input[name="skills"]:checked'))
                              .map(cb => cb.value);
            
            return {
                // Basic Information
                resourceName: document.getElementById('resourceName').value,
                organization: document.getElementById('organization').value,
                website: document.getElementById('website').value,
                contactEmail: document.getElementById('contactEmail').value || null,
                
                // Opportunity Details
                description: document.getElementById('description').value,
                cluster: document.getElementById('cluster').value,
                cost: document.getElementById('cost').value,
                location: document.getElementById('location').value,
                duration: document.getElementById('duration').value,
                
                // Eligibility
                minGPA: document.getElementById('minGPA').value || null,
                grades: grades,
                skills: skills,
                serviceHours: document.getElementById('serviceHours').value || null,
                
                // Submitter Information
                submitterName: document.getElementById('submitterName').value,
                submitterEmail: document.getElementById('submitterEmail').value,
                submitterRole: document.getElementById('submitterRole').value,
                additionalInfo: document.getElementById('additionalInfo').value || null,
                
                // Metadata
                submissionDate: new Date().toISOString(),
                status: 'pending',
                submissionId: 'SUB-' + Date.now()
            };
        }
        
        function saveSubmission(formData) {
            // Get existing submissions or create new array
            const submissions = JSON.parse(localStorage.getItem('studentAtlasSubmissions') || '[]');
            
            // Add new submission
            submissions.push(formData);
            
            // Save back to localStorage
            localStorage.setItem('studentAtlasSubmissions', JSON.stringify(submissions));
            
            // Also save to session for immediate feedback
            sessionStorage.setItem('lastSubmission', JSON.stringify(formData));
            
            console.log('Submission saved:', formData);
        }
        
        // ============================================
        // MODAL FUNCTIONS
        // ============================================
        
        function showSuccessModal(email) {
            document.getElementById('confirmationEmail').textContent = email;
            document.getElementById('successModal').classList.add('show');
        }
        
        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('show');
            window.location.href = 'index.html';
        }
        
        function submitAnother() {
            document.getElementById('successModal').classList.remove('show');
            clearForm();
            
            // Scroll to top of form
            document.getElementById('submissionForm').scrollIntoView({ behavior: 'smooth' });
        }
        
        // ============================================
        // FORM UTILITIES
        // ============================================
        
        function clearForm() {
            if (confirm('Are you sure you want to clear the entire form? All entered data will be lost.')) {
                document.getElementById('submissionForm').reset();
                
                // Reset hidden inputs
                document.getElementById('gradesInput').value = '';
                document.getElementById('skillsInput').value = '';
                
                // Reset custom validity
                document.querySelectorAll('input, select, textarea').forEach(element => {
                    element.setCustomValidity('');
                });
                
                StudentAtlas.showNotification('Form cleared', 'info');
            }
        }
        
        // ============================================
        // AI CHAT FUNCTIONS
        // ============================================
        
        function toggleAIChat() {
            const panel = document.getElementById('aiPanel');
            panel.classList.toggle('open');
            
            if (panel.classList.contains('open')) {
                document.getElementById('aiInput').focus();
            }
        }
        
        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            const messagesDiv = document.getElementById('aiMessages');
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.innerHTML = `<strong>You:</strong> ${message}`;
            messagesDiv.appendChild(userMsg);
            
            // Clear input
            input.value = '';
            
            // Get AI response with submission-specific answers
            setTimeout(() => {
                const aiMsg = document.createElement('div');
                aiMsg.className = 'message ai';
                
                let response = StudentAtlas.getZeusResponse(message);
                
                // Enhanced responses for submission context
                if (message.toLowerCase().includes('eligible') || message.toLowerCase().includes('qualif')) {
                    response = "Eligible resources include STEM programs, arts opportunities, community service, leadership programs, and scholarships for students grades 9-12 and college. Commercial services or paid ads are not eligible.";
                } else if (message.toLowerCase().includes('cluster') || message.toLowerCase().includes('category')) {
                    response = "We have 5 clusters: STEM (science/tech), Arts (creative), Humanitarian (service), Civics (government/leadership), and Scholarships (financial aid). Choose the one that best fits the opportunity.";
                } else if (message.toLowerCase().includes('review') || message.toLowerCase().includes('timeline')) {
                    response = "Submissions are reviewed within 5-7 business days. During summer, it may take up to 10 days. You'll receive an email when approved.";
                } else if (message.toLowerCase().includes('required') || message.toLowerCase().includes('need')) {
                    response = "Required fields: Resource name, organization, website, description, cluster, cost, location, duration, eligible grades, your name, email, and role. GPA and service hours are optional.";
                } else if (message.toLowerCase().includes('cost') || message.toLowerCase().includes('free')) {
                    response = "Cost options: Free, Paid, Scholarship Available, Stipend Provided, or Variable. Be accurate so students can filter properly.";
                }
                
                aiMsg.innerHTML = `<strong>Zeus:</strong> ${response}`;
                messagesDiv.appendChild(aiMsg);
                
                // Scroll to bottom
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }, 500);
        }
        
        // ============================================
        // EVENT LISTENERS
        // ============================================
        
        function setupSubmissionListeners() {
            // AI chat input
            const aiInput = document.getElementById('aiInput');
            if (aiInput) {
                aiInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') sendAIMessage();
                });
            }
            
            // Profile menu
            const profileBtn = document.querySelector('.profile-btn');
            if (profileBtn) {
                profileBtn.addEventListener('click', toggleProfileMenu);
            }
            
            // Form auto-save on change (optional)
            const form = document.getElementById('submissionForm');
            form.addEventListener('change', function() {
                // In a real app, you might auto-save drafts
                // localStorage.setItem('submissionDraft', new FormData(form));
            });
        }
        
        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('hidden');
        }
        
        function logout() {
            StudentAtlas.clearAllData();
            window.location.href = 'index.html';
        }
        
        // ============================================
        // GLOBAL FUNCTION EXPORTS
        // ============================================
        
        window.handleSubmission = handleSubmission;
        window.clearForm = clearForm;
        window.closeSuccessModal = closeSuccessModal;
        window.submitAnother = submitAnother;
        window.toggleAIChat = toggleAIChat;
        window.sendAIMessage = sendAIMessage;
        window.toggleProfileMenu = toggleProfileMenu;
        window.logout = logout;
    </script>
    
    <script>
    function openReaderOverlay() {
        var main = document.getElementById('main-content');
        var content = main ? main.innerText : document.body.innerText;
        document.getElementById('readerContent').innerText = content;
        document.getElementById('readerOverlay').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    function closeReaderOverlay() {
        document.getElementById('readerOverlay').style.display = 'none';
        document.body.style.overflow = '';
        if (window.speechSynthesis) window.speechSynthesis.cancel();
    }
    function readAloud() {
        if (!window.speechSynthesis) return;
        var text = document.getElementById('readerContent').innerText;
        var utter = new SpeechSynthesisUtterance(text);
        utter.rate = 1;
        utter.pitch = 1;
        utter.volume = 1;
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(utter);
    }
    window.addEventListener('DOMContentLoaded', function() {
        var readerBtn = document.getElementById('screenReader');
        if (readerBtn) {
            readerBtn.onclick = openReaderOverlay;
        }
    });
    </script>
</body>
</html>